<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="UTF-8">
  <title>How to configure xyz nodes - Node XYZ </title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="stylesheet" href="/assets/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/assets/css/theme.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">
  <!-- <link rel="stylesheet" href="/assets/css/main.css"> -->
  <link rel="stylesheet" href="/assets/css/stylish.css">
  <link rel="stylesheet" href="/assets/css/ionicons.min.css">

  <script
    src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"></script>

</head>

<body>

<style media="screen">
body {
  background-color: var(--light-color);
  color: var(--dark-color)
}
</style>
<style media="screen">
/* Nav */
#mainNav {
  color: var(--light-color) !important;
}

</style>

<nav class="navbar navbar-inverse" style="margin:0" id="mainNav">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand spacing" href="/">NODE XYZ</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Repositories <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li class="padding"> CORE REPOSITORIES </li>
            <li><a href="https://github.com/node-xyz/xyz-core" class="spacing">xyz.core</a></li>
            <li><a href="https://github.com/node-xyz/xyz-cli" class="spacing">xyz.cli</a></li>
            <li role="separator" class="divider"></li>
            <li class="padding"> ADDITIONAL </li>
            <li><a href="https://github.com/node-xyz/xyz.rsmq.single.bootstrap" class="spacing">xyz.rsmq</a></li>
            <li><a href="https://github.com/node-xyz/xyz.monitor.basic.bootstrap" class="spacing">xyz.monitor</a></li>
            <li><a href="https://github.com/node-xyz/xyz.ping.swim.bootstrap" class="spacing">xyz.ping.swim</a></li>
            <li><a href="https://github.com/node-xyz/xyz.ping.stochastic.bootstrap" class="spacing">xyz.ping.stochastic</a></li>
            <li><a href="https://github.com/node-xyz/xyz.iron.man.bootstrap" class="spacing">xyz.iron.man</a></li>
            <li><a href="https://github.com/node-xyz/xyz.send.round.robin" class="spacing">xyz.round.robin</a></li>

          </ul>
        </li>
      </ul>

      <ul class="nav navbar-nav navbar-left">
        <!-- <li><a href="#">Link</a></li> -->
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> Documentations <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li class="padding"> READING </li>
            <li><a href="/documentations/getting-started">Getting Started</a></li>
            <li><a href="/documentations/advance">Advance Topics</a></li>
            <li><a href="/apidoc">API DOC</a></li>
            <li role="separator" class="divider"></li>
            <li class="padding"> EXAMPLES </li>
            <li class="spacing"><a href="https://github.com/node-xyz/xyz.example.getting.started">xyz.getting.started</a></li>
            <li class="spacing"><a href="https://github.com/node-xyz/xyz.example.logger.bootstrap">xyz.logger.bootstrap</a></li>
            <li class="spacing"><a href="https://github.com/node-xyz/xyz.example.auth.basic.receive">xyz.auth.basic.receive</a></li>
            <li class="spacing"><a href="https://github.com/node-xyz/xyz.example.auth.basic.send">xyz.auth.basic.send</a></li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<section class="container">

  <ol class="breadcrumb" style="margin: 10px; color: white;">
    <li><a class='spacing' href="/">Node XYZ </a></li>
    
    
    
    
    
    
    
    

    
      

    
      
      
      <li >
        <a style="color: inherit" href="/documentations/">documentation</a>
      </li>
      
      

    
      

    
      

    
      

    
      

    
      

    
      

    
      

    
      

    
      
      
    
    
    
    

    
      

    
      

    
      
      
      <li >
        <a style="color: inherit" href="/documentations/advance/">advance</a>
      </li>
      
      

    
      

    
      

    
      

    
      

    
      

    
      

    
      

    
      
      
    
    
    
    

    
      

    
      

    
      

    
      

    
      

    
      

    
      

    
      

    
      

    
      
      
      <li class="active">
        <a style="color: inherit" href="/documentations/advance/configuration/">configuration</a>
      </li>
      
      

    
      
      
    </ol>

    <hr>


    <h1 id="configurations-phases">configurations phases:</h1>

<p>configurations are an important part of the xyz ecosystem, hence it is important for the developer to know how to use them and manipulate them.</p>

<p>XYZ configurations can be set on 3 phases:</p>

<ul>
  <li>[3] The default value: stored in <a href="https://github.com/node-xyz/xyz-core/blob/master/src/Config/Constants.js"><code class="highlighter-rouge">Constants.js</code></a> file in <code class="highlighter-rouge">xyz-core</code></li>
  <li>[2] <code class="highlighter-rouge">selfConf</code> and <code class="highlighter-rouge">systemConf</code> passed to the constructor of xyz-core at runtime</li>
  <li>[1] via command line arguments</li>
</ul>

<p>and each of them have priorities indicated by <code class="highlighter-rouge">[x]</code> in the list. This means that whatever you pass in something as <strong>command line argument</strong> will override <code class="highlighter-rouge">selfConf</code> and <code class="highlighter-rouge">Constants.js</code>. Let’s look at each them one by one:</p>

<h3 id="the-default-configuration-constantsjs">The default configuration: Constants.js</h3>

<p>Recall from the two simple services that we worked with in the getting started section. Let’s lunch one of them but this time, we are not going to pass any configuration to it:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>let xyz = require('xyz-core')
let mathMS = new xyz({
  selfConf: {},
  systemConf: {}
})

// register any services

console.log(mathMS)

</code></pre>
</div>

<p>As you can see the system lunches perfectly with the default values defined in <code class="highlighter-rouge">Constants.js</code>. The default name of the service will be <code class="highlighter-rouge">node-xyz-init</code> and one HTTP server will be launched by default on port 4000.</p>

<h3 id="runtime-configurations-selfconf-and-systemconf">Runtime configurations: selfConf and systemConf</h3>

<p>As you expect, whatever you place in <code class="highlighter-rouge">selfConf</code> and <code class="highlighter-rouge">systemConf</code> at runtime will override the default values.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>let mathMS = new xyz({
  selfConf: {
    transport: [{type: 'HTTP', port: 4010}],
    name: 'from-self-conf'
  },
  systemConf: {nodes: []}
})

console.log(mathMS)

</code></pre>
</div>

<p>pay close attention to the values printed after <code class="highlighter-rouge">console.log(mathMS)</code> and see how the port of <code class="highlighter-rouge">transport</code> and <code class="highlighter-rouge">name</code> have changed.</p>

<h3 id="command-line-arguments">Command line arguments</h3>

<p>One last way to change configurations is to use command line arguments. Normally, you would run an instance like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ node mathMs.js
</code></pre>
</div>

<p>But, we have seen in the getting started section that you can actually override the port value of a node using:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ node math.ms.js --xyz-transport.0.port 5002
</code></pre>
</div>

<p>this is actually a global pattern for overriding the configurations. It goes like this: <code class="highlighter-rouge">--xyz-([CONFIG.KEY])* [CONFIG.VALUE]</code></p>

<p>As an example, you can change the name of a service via command line using:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ node math.ms.js --xyz-name sth-from-cli
</code></pre>
</div>

<p>If you run a service like this, you’ll see that:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>____________________  GLOBAL ____________________
selfConfig:
  {
  "name": "sth-from-cli",
  "defaultSendStrategy": "xyz.service.send.first.find",
  "logLevel": "info",
  ....
</code></pre>
</div>

<p>Keys with more depth can also be manipulated using a <code class="highlighter-rouge">.</code>, just as you access normal data in an object:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ node mathMs.js --xyz-cli.enable true

// analogous to
// selfConf: {
//    ...
//    cli: {enable : true }
//    ...  
</code></pre>
</div>

<p>Or with the port case:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ node mathMs.js --xyz-transport.0.port 6000

// analogous to
// selfConf: {
//    ...
//    transport: [{type: '...', port: 6000 }]
//    ...  
</code></pre>
</div>

<p>A complete example could be as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ node mathMs.js --xyz-logLevel debug --xyz-seed 127.0.0.1:4000 --xyz-name math.ms.slave
</code></pre>
</div>



  </section>
  
<style media="screen">
  .site-footer{
    padding: 30px;
    color: var(--light-color);
    background-color: var(--very-dark);
    margin-top: 40px;
  }
</style>
<footer class="site-footer">
  <span class="site-footer-owner">
    <a href="http://localhost:1999">NODE XYZ</a>
     is maintained by <a href="">Kian Peymani & Ajand </a></span>
  <small>
    <br>
    <span class="site-footer-credits">This page was generated and hosted by <a href="https://pages.github.com">GitHub Pages</a></small>
</footer>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" charset="utf-8"></script>

</body>
</html>
